CREATE TYPE "Delivery" AS ENUM ('SHIP','PICKUP');CREATE TYPE "Role" AS ENUM ('RETAIL','WHOLESALE');CREATE TABLE "Customer" ("id" TEXT PRIMARY KEY, "number" TEXT UNIQUE NOT NULL, "codeHash" TEXT NOT NULL, "name" TEXT, "email" TEXT, "isActive" BOOLEAN NOT NULL DEFAULT TRUE, "createdAt" TIMESTAMP NOT NULL DEFAULT NOW(), "updatedAt" TIMESTAMP NOT NULL DEFAULT NOW());CREATE TABLE "Product" ("id" TEXT PRIMARY KEY, "sku" TEXT UNIQUE NOT NULL, "nameEn" TEXT NOT NULL, "retailPriceGBP" DECIMAL(10,2) NOT NULL, "wholesalePriceGBP" DECIMAL(10,2) NOT NULL, "isActive" BOOLEAN NOT NULL DEFAULT TRUE, "createdAt" TIMESTAMP NOT NULL DEFAULT NOW(), "updatedAt" TIMESTAMP NOT NULL DEFAULT NOW());CREATE TABLE "Order" ("id" TEXT PRIMARY KEY, "customerId" TEXT NOT NULL, "createdAt" TIMESTAMP NOT NULL DEFAULT NOW(), "deliveryMethod" "Delivery" NOT NULL DEFAULT 'SHIP', "notes" TEXT, "subtotal" DECIMAL(10,2) NOT NULL, "vat" DECIMAL(10,2) NOT NULL, "total" DECIMAL(10,2) NOT NULL, "acceptedTermsAt" TIMESTAMP, CONSTRAINT fk_customer FOREIGN KEY ("customerId") REFERENCES "Customer"("id"));CREATE TABLE "OrderItem" ("id" TEXT PRIMARY KEY, "orderId" TEXT NOT NULL, "productId" TEXT NOT NULL, "qty" INT NOT NULL, "unitPrice" DECIMAL(10,2) NOT NULL, CONSTRAINT fk_order FOREIGN KEY ("orderId") REFERENCES "Order"("id"), CONSTRAINT fk_product FOREIGN KEY ("productId") REFERENCES "Product"("id"));

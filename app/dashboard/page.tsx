import { authOptions } from '../../lib/authOptions';import { getServerSession } from 'next-auth';import { prisma } from '../../lib/prisma';export default async function Dashboard(){const s=await getServerSession(authOptions);const u=s?.user as any;const productsCount=await prisma.product.count();const ordersCount=u?await prisma.order.count({where:{customer:{number:u.number}}}):0;return(<main className='container py-10'><h1 className='text-3xl font-bold mb-4'>Dashboard</h1>{!u&&<p>Please login.</p>}{u&&(<div className='grid gap-4 sm:grid-cols-2'><div className='card'><div className='text-sm text-gray-500'>Customer</div><div className='text-xl font-semibold mt-1'>{u.name||'â€”'}</div><div className='text-sm mt-1'>Number: {u.number}</div><div className='text-sm mt-1'>Role: Wholesale</div></div><div className='card'><div className='text-sm text-gray-500'>Store snapshot</div><div className='mt-1'>Products: <strong>{productsCount}</strong></div><div className='mt-1'>Your orders: <strong>{ordersCount}</strong></div></div></div>)}</main>)}
